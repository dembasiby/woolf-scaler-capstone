_format_version: "3.0"
_transform: true

services:
  - name: product-service
    url: http://product-service:8082
    routes:
      - name: product-routes
        paths:
          - /api/products
        strip_path: true
        methods:
          - GET
          - POST
          - PUT
          - DELETE
          - OPTIONS

  - name: cart-service
    url: http://cart-service:8084
    routes:
      - name: cart-routes
        paths:
          - /api/carts
        strip_path: true
        methods:
          - GET
          - POST
          - PUT
          - DELETE
          - OPTIONS
plugins:
  - name: proxy-cache
    config:
      content_type:
        - application/json
      cache_ttl: 60
      strategy: memory
      request_method:
        - GET
      response_code:
        - 200
      vary_headers:
        - Authorization